{% extends "layout.html" %}
{% block body %}

<h1>Blog</h1>

{% for post in posts %}
{% autoescape false %}
{% if single == None%}
<article class="part-post">
    <p class="date">{{ post.day }}/{{ post.month }}/{{ post.year }}</p> 
    <h2><a href="/post/{{ post.year }}/{{ post.month }}/{{ post.day }}">{{ post.title }}</a></h2>
    {{ post.content.split("</p>")[0] }}..</p>
    <p>[<a href="/post/{{ post.year }}/{{ post.month }}/{{ post.day }}">read more</a>]</p>
    <div style="clear:both"></div>
</article>
{% endif %}
{% if single or not single%}
<article class="full-post">
    <h2><a href="/blog/{{ post.year }}/{{ post.month }}/{{ post.day }}/{{ post.url_title.lower() }}">{{ post.title }}</a> <span style="font-size:14px; color:white; float:right"><a href="/blog/{{ post.year }}/{{ post.month }}/{{ post.day }}/{{ post.url_title.lower() }}/#comments">Comment</a></span></h2>
    {{ post.content }}
    <div style="clear:both"></div>
    <p class="date">{{ post.day }}/{{ post.month }}/{{ post.year }} - <a href="/blog/{{ post.year }}/{{ post.month }}/{{ post.day }}/{{ post.url_title.lower() }}/#disqus_thread">Comments</a></p>    

</article>

{% if single == True %}
<div id="comments"></div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'flyingsparx';
     (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>

{% endif %}
{% endif %}
{% endautoescape %}
{% endfor %}
</div>
{% endblock %}
