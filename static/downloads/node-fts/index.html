<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>FTS - Node.js</title>
	<link rel="stylesheet" href="styles.css" type="text/css">
	<script src="jquery.js"></script>
	<script src="easing.js"></script>
	<script src="color.js"></script>
</head>

<body>
<header>
	<img src="logo.png" alt="Node.js Logo" id="logo" />
	<div id="author">
		<p>
			<a href="http://twitter.com/flyingsparx" target="_blank">Will</a> 
			&amp; 
			<a href="http://twitter.com/encima27" target="_blank">Chris</a>
		</p>
		<p>
			<a href="http://cs.cf.ac.uk" target="_blank">CS &amp; I</a>
		</p>
	</div>
</header>

<div id="progress"></div>
<div id="progress-value">Blah</div>

<div id="presentation">

	<section class="slide" id="welcome">
		<h1>Node.js - A brief introduction</h1>
		<h2>FTS Team</h2>
		<h3>July 4th, 2012</h3>
	</section>
	
	<section class="slide" id="introduction">
		<h1>Intro</h1>
		<ul>
			<li>Node.js is a platform for building web applications</li>
			<li>Designed to be fast and scalable</li>
			<li>Lightweight (you pretty much just write what you need to run)</li>
			<li>You don't use a webserver (such as Apache), since it can be made
				into a webserver itself</li>
			<li>Provides similar level of functionality to PHP on Apache (for example)</li>
			<li>Shown to be 
				<a href="http://zgadzaj.com/benchmarking-nodejs-basic-performance-tests-against-apache-php"
					target="_blank">
					significantly faster</a>
				than PHP on Apache</li>
			<li>Written in JavaScript (hence the name)</li>
			<li>This presentation is hosted on a local Node.js server</li>
		</ul>
	</section>
	
	<section class="slide" id="example-1">
		<h1>Example 1: Cloud9 IDE</h1>
		<ul>
			<li>Popular cloud-based IDE</li>
			<li>Written in Node.js</li>
			<li><a href="http://c9.io" target="_blank">c9.io</a></li>
		</ul>
	</section>
	
	<section class="slide" id="example-2">
		<h1>Example 2: Doodle or Die</h1>
		<ul>
			<li>Game similar to Draw Something</li>
			<li>Again, written entirely in Node.js (for 
				<a href="http://nodeknockout.com/" target="_blank">
					Node Knockout
				</a> competition)</li>
			<li><a href="http://doodleordie.com" target="_blank">doodleordie.com</a></li>
		</ul>
	</section>

	<section class="slide" id="javascript">
		<h1>JavaScript</h1>
		<ul>
			<li>Object-oriented (web) language</li>
			<li>Runs client side (just the file is served by the server)</li>
			<li>Historically used for making web pages more dynamic</li>
			<li>Nowadays very widespread. Rare to find a modern website without some
				JavaScript implementation</li>
		</ul>
	</section>
	
	<section class="slide" id="node-js">
		<h1>JavaScript as Node.js</h1>
		<ul>
			<li>Example of a different use of JavaScript</li>
			<li>Uses JavaScript to run a web server</li>
		</ul>
	</section>
	
	<section class="slide" id="requirements">
		<h1>What You'll Need</h1>
		<ul>
			<li>Node.js installed</li>
			<li>Text editor</li>
		</ul>
	</section>
	
	<section class="slide" id="installation">
		<h1>Installing Node.js</h1>
		<ul>
			<li>Download and install from <a href="http://nodejs.org/#download" 
				target="_blank">nodejs.org/#download</a></li>
			<li>Available as installer for OS X and Windows</li>
			<li>Binaries for other UNIX</li>
		</ul>
	</section>
	
	<section class="slide" id="server">
		<h1>Creating a Server</h1>
		<ul>
			<li>Create a new file:<br /><code>server.js</code></li>
			<li>Include Node.js' HTTP Module:<br />
				<code>var http = require("http");</code></li>
			<li>Use HTTP's <code>createServer()</code> method:<br />
				<code>http.createServer(function(request, response){});</code></li>
			<li><code>request</code> = the request from the user's browser</li>
			<li><code>response</code> = the response to be sent back to the browser</li>
		</ul>
	</section>
	
	<section class="slide" id="response">
		<h1>Configuring the Server Response</h1>
		<ul>
			<li>Can be from a file or directly echoed by JavaScript</li>
			<li>Three main methods:<br />
				- <code>writeHead()</code> - send the HEAD packet (MIME type)<br />
				- <code>write()</code> - the main payload<br />
				- <code>end()</code> - end the stream<br /></li>
			<li>Response sent when <code>end()</code> is called</li>
		</ul>
	</section>
	
	<section class="slide" id="running">
		<h1>Running the Server</h1>
		<ul>
			<li>Run: <br /><code>node server.js</code></li>
			<li>Access: <a href="http://localhost:8888">localhost:8888</a> (or
				whatever you set your port number to)</li>
			<li>We now have a simple server that accepts requests and returns a response</li>
			<li>Demo: Node.js server running</li>
		</ul>
	</section>
	
	<section class="slide" id="modules">
		<h1>Node.js Modules</h1>
		<ul>
			<li>This makes code re-usable</li>
			<li>Created by exporting a function:<br />
				<code>exports.start = start()</code></li>
			<li>The <code>start()</code> method is now available to other Node.js modules</li>
			<li>We try to keep modules in separate files for comprehension and re-usability</li>
		</ul>
	</section>
	
	<section class="slide" id="server-module">
		<h1>Turning our Server into a Module</h1>
		<ul>
			<li>Demo: differences in new server module</li>
		</ul>
	</section>
	
	<section class="slide" id="automating">
		<h1>Automating Node.js</h1>
		<ul>
			<li>Let's make one file to handle all of this:<br />
				<code>main.js</code></li>
			<li>Used to start the server and maintain configuration files</li>
			<li>Demo: explain <code>main.js</code></li>
		</ul>
	</section>
	
	<section class="slide" id="routing">
		<h1>Routing requests</h1>
		<ul>
			<li>Make a new module:<br />
				<code>router.js</code></li>
			<li>This file will listen for <b>reqeusts</b> and returns the appropriate
				<b>response</b></li>
			<li>Use <code>if</code> statements to listen for requests</li>
			<li>For example, a request is made to <a href="http://localhost:8888/my_page">
				localhost:8888/my_page</a>, the 
				following line will interpret the <b>request</b> and return the appropriate 
				<b>response</b>:<br />
				<code>if(pathname == "/my_page"){response.write("This is my page!");}
				</code></li>
			<li>The variable <code>pathname</code> can be set in the <code>server.js</code>
				module so it's available to all your other modules:<br />
				<code>var pathname = url.parse(requesr.url).pathname;</code></li>
		</ul>
	</section>
	
	<section class="slide" id="respond-html">
		<h1>Responding with an HTML File</h1>
		<ul>
			<li>You can always route to an HTML file as a response instead (this is
				probably more useful than just returning text)</li>
			<li>This is done using something like:<br /><br />
				<code>var fs = require("fs");<br /><br />
						response.write(fs.readFile("/path/to/file.html"));<br />
						response.end();<br />
				</code></li>
			<li>Demo: Routing to an HTML file</li>
		</ul>
	</section>
	
	<section class="slide" id="npm">
		<h1>Node Package Manager</h1>
		<ul>
			<li>Allows for the installation of various Node.js packages and plugins</li>
			<li>Is part of the standard Node.js installation</li>
			<li>Usage:<br />
				<code>npm install PACKAGE_NAME</code></li>		
			<li>See what plugins there are at <a href="http://search.npmjs.org"
				target="_blank">search.npmjs.org</a></li>
		</ul>
	</section>
	
	<section class="slide" id="npm-example">
		<h1>NPM Simple Example: nodemailer</h1>
		<ul>
			<li>Supports SMTP for sending email</li>
			<li>Install:<br />
				<code>npm install nodemailer</code></li>
			<li>Import the installed module to your web application:<br />
				<code>var mailer = require('nodemailer');</code></li>
			<li>Give the module your email details:<br />
				<code>
					mailer.SMTP = {<br />
					<span class="indent">&nbsp;</span>host: 'gmail.com', <br />
					<span class="indent">&nbsp;</span>user: 'you@example.com', <br />
					<span class="indent">&nbsp;</span>pass: 'xxxxxx'<br />
					};
				</code>, etc.</li>
			<li>Send the email:<br />
				<code>mailer.send_mail({sender:ME,to:YOU,subject:'Hi!',body:'Hello'});</code></li>
		</ul>
	</section>
	
	<section class="slide" id="npm-demo">
		<h1>Demo NPM Example</h1>
		<ul>
			<li>This example uses HTTP POST, which can easily be interpreted by Node.js</li>
			<li>We:<br />
				- Request a page with a form from our server<br />
				- Complete the form and press the submit button<br />
				- The server processes the POST data<br />
				- nodemailer emails the data from the form to the appropriate person
				</li>
			<li>Demo: show how POST is achieved in Node.js</li>
			<li>Demo: sending an email from the form using POST and nodemailer</li>
		</ul>
	</section>
	
	<section class="slide" id="asynchronous">
		<h1>Asynchronous Nature of Node.js</h1>
		<ul>
			<li>All responses can be made asynchronous</li>
			<li>This means that pages can be made dynamic from the <b>server side</b></li>
			<li>A-synchronousness allows for Node to execute long stuff while still 
			continuing in the event loop</li>
		</ul>
	</section>
	
</div>

<footer> 
	<h3>Slides</h3>
	<nav>
	</nav>
</footer>


<script>

var progress = 0;
var progressStep = 0;
var numSlides = 0;
var currentSlide = 0;

function showSlide(slide){
	var previous = $(".selected");
	if (previous.length > 0){
		previous.removeClass("selected");
		previous.animate({left: '-3000px', opacity: '0.0'}, 400, "easeOutQuint", function(){});
	}
	
	slide.addClass("selected");
	var id = slide.attr("id");
	window.location = "#"+id;
	var counter = 0;
	$("#presentation").children(".slide").each(function () {
		counter+= 1;
		if($(this).attr("id") == id){
			currentSlide = counter;
			progress = counter * progressStep;
			return false;
		}
	});
	slide.animate({top: '0px', left:'0px', opacity: '1.0'}, 400, "easeOutQuint", function(){});
	slide.addClass("selected");
	$("#progress").animate({width: progress+'%'},800, "easeOutBounce", function(){});
	var valueLeftNess = progress-3;
	$("#progress-value").animate({left: valueLeftNess+'%'},400, "easeOutQuint", function(){});
	$("#progress-value").html(Math.round(progress) + "%");
}

$(document).ready(function(){
	var requested = window.location.hash;
	var slideToShow;
	if($(requested).length == 0){
		slideToShow = $("#presentation").children(":first");
	}
	else{
		slideToShow = $(requested);
	}
	$("#presentation").children(".slide").each(function () {
		numSlides += 1;
		var id = $(this).attr("id");
		$("footer nav").append('<a href="#'+id+'">'+id+'</a> ');
	});
	progress = (1 / numSlides) * 100;
	progressStep = (1 / numSlides) * 100;
	showSlide(slideToShow);
	
	$("footer nav a").click(function(){
		var id = $(this).attr('href');
		showSlide($(id));
	});
	$("footer").mouseenter(function(){
		$("footer").animate({'background-color': 'rgba(140, 200, 75, 1.0)'},700);
		$("footer nav").show(300, function(){});
	});
	$("footer").mouseleave(function(){
		$("footer").animate({'background-color': 'rgba(250, 250, 250, 0.3);'},700);
		$("footer nav").hide(300, function(){});
	});
});

$(document).keyup(function(e){
	if (e.keyCode == 37) { 
		if(currentSlide > 1){
			var current = $(".selected");
			var next = current.prev();
			progress -= progressStep;
			
			showSlide(next);
			
		}
	}
    if (e.keyCode == 39) { 
    	if(currentSlide < numSlides){
			var current = $(".selected");
			var next = current.next();   
			progress += progressStep;   
			//current.removeClass("selected");
			//current.animate({left: '-1000px'}, 400, "easeOutQuint", function(){});
			showSlide(next);
		}
    }	     
});
</script>

</body>
</html>